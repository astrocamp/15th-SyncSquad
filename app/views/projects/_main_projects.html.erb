<%= search_form_for @q, data: { turbo_frame: :results } do |f| %>
  <div class="flex flex-col md:flex-row justify-center gap-4 items-center bg-white p-4 shadow-xl mt-5">
    <div class="text-lg font-semibold"> <%= t('projects.main_search') %> </div>
    <div class="flex flex-col md:flex-row items-center space-x-0 md:space-x-2">
      <%= f.search_field :title_or_owner_email_cont, class:"form-input border border-gray-300 rounded-md focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 w-full md:w-auto", placeholder: t('projects.main_title_or_email'), oninput: 'this.form.requestSubmit();' %>
    </div>

    <div class="flex items-center">
      <%= link_to t('projects.main_clear'), "", class:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-md shadow-lg transition duration-150 ease-in-out", data: {controller: "reset-form", action:"turbo:submit-end->reset-form#reset"} %> 
    </div>
  </div>
<% end %>

<div class="overflow-x-auto shadow-xl mb-20">
  <%= turbo_frame_tag :results do %>
    <table class="min-w-full bg-white divide-y divide-gray-300">
      <thead class="bg-gray-200">
        <th class="table-th"><%= sort_link(@q, :title, t('projects.main_title'), default_order: :desc) %> </th>
        <th class="table-th"><%= sort_link(@q, :description, t('projects.main_description'), default_order: :desc) %></th>
        <th class="table-th"><%= sort_link(@q, :owner_email, t('projects.main_email'), default_order: :desc) %></th>
        <th class="table-th"><%= sort_link(@q, :created_at, t('projects.main_created_time'), default_order: :desc) %> </th>
        <th class="table-th"><%= sort_link(@q, :updated_at, t('projects.main_updated_time'), default_order: :desc) %></th>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <% projects.each do |project| %>
        <tr class=" hover:bg-gray-100">
          <td class="max-w-[3px] xs:max-w-xs lg:max-w-md px-1 py-2 truncate text-xs sm:px-2 sm:py-3 sm:text-sm"> <%= link_to highlight(project.title, params.dig(:q, :title_or_owner_email_cont)), project, data: {turbo_frame: "_top"} %></td>
          <td class="max-w-[3px] xs:max-w-xs lg:max-w-md px-1 py-2 truncate text-xs sm:px-2 sm:py-3 sm:text-sm"><%= project.description %></td>
          <td class="max-w-[3px] xs:max-w-xs lg:max-w-md px-1 py-2 text-xs sm:px-2 sm:py-3 sm:text-sm"><%= highlight project.owner.email, params.dig(:q, :title_or_owner_email_cont) %></td>
          <td class="max-w-[3px] xs:max-w-xs lg:max-w-md px-1 py-2 text-xs sm:px-2 sm:py-3 sm:text-sm"><%= project.created_at.strftime("%Y-%m-%d") %></td>
          <td class="max-w-[3px] xs:max-w-xs lg:max-w-md px-1 py-2 text-xs sm:px-2 sm:py-3 sm:text-sm"><%= project.updated_at.strftime("%Y-%m-%d") %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>